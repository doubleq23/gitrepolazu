import boto3

def getinstance():
    aws_profile = 'prodcloud'
    aws_region = 'us-east-1'

    session = boto3.Session(profile_name=aws_profile)
    ec2_client = session.client('ec2', aws_region)

    #print('instance')

    describe = ec2_client.describe_instances(
        Filters=[
            {
                'Name':'instance-state-name',
                'Values':['running']
            },
            {
                'Name':'private-ip-address',
                'Values':['10.15.3.110', '10.15.3.188', '10.15.3.216', '10.15.3.241', '10.15.3.25', '10.15.3.32', '10.15.3.39', '10.15.4.119', '10.15.4.156', '10.15.4.173', '10.15.4.215', '10.15.4.62', '10.15.4.79', '10.15.4.85', '10.15.4.92', '10.15.48.46', '10.15.49.22', '10.15.5.100', '10.15.5.108', '10.15.5.117', '10.15.5.119', '10.15.5.120', '10.15.5.125', '10.15.5.134', '10.15.5.154', '10.15.5.157', '10.15.5.159', '10.15.5.161', '10.15.5.164', '10.15.5.170', '10.15.5.194', '10.15.5.208', '10.15.5.215', '10.15.5.216', '10.15.5.224', '10.15.5.228', '10.15.5.234', '10.15.5.235', '10.15.5.240', '10.15.5.242', '10.15.5.251', '10.15.5.32', '10.15.5.4', '10.15.5.40', '10.15.5.45', '10.15.5.5', '10.15.5.54', '10.15.5.6', '10.15.5.60', '10.15.5.62', '10.15.5.63', '10.15.5.65', '10.15.5.66', '10.15.5.67', '10.15.5.7', '10.15.5.70', '10.15.5.76', '10.15.5.8', '10.15.5.83', '10.15.5.84', '10.15.5.85', '10.15.5.88', '10.15.5.89', '10.15.5.9', '10.15.5.92', '10.15.5.94', '10.15.50.10', '10.15.50.26', '10.15.51.213', '10.15.51.91', '10.15.52.160', '10.15.52.66', '10.15.53.222', '10.15.54.150', '10.15.54.19', '10.15.54.34', '10.15.55.113', '10.15.55.173', '10.15.55.227', '10.15.56.135', '10.15.56.38', '10.15.56.45', '10.15.57.122', '10.15.57.153', '10.15.58.220', '10.15.59.132', '10.15.59.156', '10.15.59.173', '10.15.59.240', '10.15.59.31', '10.15.6.103', '10.15.6.111', '10.15.6.112', '10.15.6.115', '10.15.6.126', '10.15.6.132', '10.15.6.134', '10.15.6.138', '10.15.6.139', '10.15.6.142', '10.15.6.143', '10.15.6.145', '10.15.6.146', '10.15.6.152', '10.15.6.159', '10.15.6.166', '10.15.6.17', '10.15.6.176', '10.15.6.197', '10.15.6.201', '10.15.6.202', '10.15.6.21', '10.15.6.210', '10.15.6.213', '10.15.6.221', '10.15.6.224', '10.15.6.229', '10.15.6.233', '10.15.6.234', '10.15.6.235', '10.15.6.238', '10.15.6.24', '10.15.6.246', '10.15.6.252', '10.15.6.4', '10.15.6.55', '10.15.6.64', '10.15.6.65', '10.15.6.69', '10.15.6.70', '10.15.6.73', '10.15.6.76', '10.15.6.87', '10.15.6.9', '10.15.6.95', '10.15.6.96', '10.15.60.213', '10.15.60.3', '10.15.60.82', '10.15.60.99', '10.15.61.119', '10.15.61.225', '10.15.61.253', '10.15.61.95', '10.15.62.231', '10.15.62.57', '10.15.63.200', '10.15.64.119', '10.15.64.225', '10.15.65.110', '10.15.65.12', '10.15.65.3', '10.15.65.7', '10.15.65.87', '10.15.65.88', '10.15.66.235', '10.15.67.0', '10.15.67.152', '10.15.67.90', '10.15.68.10', '10.15.68.145', '10.15.68.188', '10.15.68.76', '10.15.69.116', '10.15.69.236', '10.15.69.247', '10.15.7.200', '10.15.71.12', '10.15.71.189', '10.15.72.223', '10.15.72.50', '10.15.72.6', '10.15.73.194', '10.15.73.241', '10.15.74.191', '10.15.74.196', '10.15.74.222', '10.15.75.132', '10.15.75.83', '10.15.77.169', '10.15.77.41', '10.15.78.224', '10.15.78.39', '10.15.78.55', '10.15.79.131', '10.15.79.164', '10.15.79.69', '10.20.90.201', '172.17.3.100', '172.17.3.233', '172.17.3.254']
            }
        ]
    )

    for x in describe['Reservations']:
        #print(x['Instances'][0]['PrivateIpAddress'])
        instance_ID = x['Instances'][0]['InstanceId']

        tags = ec2_client.describe_tags(
            Filters=[
                {
                    'Name': 'resource-id',
                    'Values': [instance_ID]
                }
            ]
        )

        pkg_name = ''
        owner = ''
        #print(tags['Tags'][0])
        for y in tags['Tags']:
            if(y['Key']=="PackageName"):
                pkg_name = (y['Value'] + ' ' + y['ResourceId'])
            if(y['Key']=="Owner"):
                owner = (y['Value'] + ' ' + y['ResourceId'])
                
        print(instance_ID + ' : ' + owner + ' | package name : '+ pkg_name)
            


getinstance()
#privateIP = [Reservations][Instances][PrivateIpAddress]